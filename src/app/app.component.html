<!-- src/app/app.component.html -->

<div class="container">
  <h1>Detector de Escalas y Acordes</h1>

  <div *ngIf="!audioStarted">
    <p>Por favor, selecciona el género musical:</p>
    <select [(ngModel)]="selectedGenre">
      <option [ngValue]="null" disabled selected>Selecciona un género</option>
      <option *ngFor="let genre of genres" [value]="genre">{{ genre }}</option>
    </select>

    <p>Selecciona el tipo de entrada:</p>
    <select [(ngModel)]="selectedInputType">
      <option [ngValue]="null" disabled selected>Selecciona una opción</option>
      <option value="microphone">Micrófono</option>
      <option value="midi">MIDI</option>
    </select>

    <button (click)="start()" [disabled]="!selectedGenre || !selectedInputType">
      Iniciar Detección
    </button>
  </div>

  <div *ngIf="audioStarted">
    <p><strong>Género Seleccionado:</strong> {{ selectedGenre }}</p>
    <p><strong>Tipo de Entrada:</strong> {{ selectedInputType === 'microphone' ? 'Micrófono' : 'MIDI' }}</p>
    <p><strong>Nota Actual:</strong> {{ currentNote }} ({{ currentFrequency | number:'1.0-2' }} Hz)</p>
    <p><strong>Notas Tocadas:</strong> {{ playedNotes.join(', ') }}</p>

    <div *ngIf="currentScale">
      <h3>Escala Detectada: {{ currentScale }}</h3>
      <h3>Notas de la Escala: {{ scaleNotes.join(', ') }}</h3>
    </div>
    <div *ngIf="!currentScale && playedNotes.length >= 3">
      <h3>No se encontraron escalas que incluyan las notas tocadas.</h3>
    </div>

    <div *ngIf="suggestedChords.length > 0">
      <h2>Acordes Sugeridos:</h2>
      <ul>
        <li *ngFor="let chord of suggestedChords">{{ chord }}</li>
      </ul>
    </div>

    <button (click)="reset()">Reiniciar</button>
  </div>
</div>
